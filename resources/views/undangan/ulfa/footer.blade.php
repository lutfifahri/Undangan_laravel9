</main>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="back-to-top"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512">
        <path
            d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z" />
    </svg></div>
<link rel='stylesheet' id='elementor-gallery-css'
    href='{{ asset('template/wp-content/plugins/elementor/assets/lib/e-gallery/css/e-gallery.min7359.css?ver=1.2.0') }}'
    type='text/css' media='all' />
<link rel='stylesheet' id='e-animations-css'
    href='{{ asset('template/wp-content/plugins/elementor/assets/lib/animations/animations.minf3df.css?ver=3.7.2') }}'
    type='text/css' media='all' />
<script type='text/javascript' src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/wdp-swiper.min.js') }}'
    id='wdp-swiper-js-js'></script>
<script type='text/javascript' src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/qr-code.js') }}'
    id='weddingpress-qr-js'></script>
<script type='text/javascript' src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/wdp-horizontal.js') }}'
    id='wdp-horizontal-js-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/exad-scripts.min9b4a.js?ver=3.0.11') }}'
    id='exad-main-script-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/lib/e-gallery/js/e-gallery.min7359.js?ver=1.2.0') }}'
    id='elementor-gallery-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor-pro/assets/js/webpack-pro.runtime.min1ac1.js?ver=3.7.3') }}'
    id='elementor-pro-webpack-runtime-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/js/webpack.runtime.minf3df.js?ver=3.7.2') }}'
    id='elementor-webpack-runtime-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/js/frontend-modules.minf3df.js?ver=3.7.2') }}'
    id='elementor-frontend-modules-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-includes/js/dist/vendor/regenerator-runtime.min3937.js?ver=0.13.9') }}'
    id='regenerator-runtime-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-includes/js/dist/vendor/wp-polyfill.min2c7c.js?ver=3.15.0') }}' id='wp-polyfill-js'>
</script>
<script type='text/javascript'
    src='{{ asset('template/wp-includes/js/dist/hooks.mincbb5.js?ver=c6d64f2cb8f5c6bb49caca37f8828ce3') }}'
    id='wp-hooks-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-includes/js/dist/i18n.min771a.js?ver=ebee46757c6a411e38fd079a7ac71d94') }}'
    id='wp-i18n-js'></script>
<script type='text/javascript' id='wp-i18n-js-after'>
    wp.i18n.setLocaleData({
        'text direction\u0004ltr': ['ltr']
    });
</script>
<script type='text/javascript' id='elementor-pro-frontend-js-before'>
    var ElementorProFrontendConfig = {
        "ajaxurl": "",
        "nonce": "052a39851b",
        "urls": {
            "assets": "",
            "rest": ""
        },
        "shareButtonsNetworks": {
            "facebook": {
                "title": "Facebook",
                "has_counter": true
            },
            "twitter": {
                "title": "Twitter"
            },
            "linkedin": {
                "title": "LinkedIn",
                "has_counter": true
            },
            "pinterest": {
                "title": "Pinterest",
                "has_counter": true
            },
            "reddit": {
                "title": "Reddit",
                "has_counter": true
            },
            "vk": {
                "title": "VK",
                "has_counter": true
            },
            "odnoklassniki": {
                "title": "OK",
                "has_counter": true
            },
            "tumblr": {
                "title": "Tumblr"
            },
            "digg": {
                "title": "Digg"
            },
            "skype": {
                "title": "Skype"
            },
            "stumbleupon": {
                "title": "StumbleUpon",
                "has_counter": true
            },
            "mix": {
                "title": "Mix"
            },
            "telegram": {
                "title": "Telegram"
            },
            "pocket": {
                "title": "Pocket",
                "has_counter": true
            },
            "xing": {
                "title": "XING",
                "has_counter": true
            },
            "whatsapp": {
                "title": "WhatsApp"
            },
            "email": {
                "title": "Email"
            },
            "print": {
                "title": "Print"
            }
        },
        "facebook_sdk": {
            "lang": "id_ID",
            "app_id": ""
        },
        "lottie": {
            "defaultAnimationUrl": ""
        }
    };
</script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor-pro/assets/js/frontend.min1ac1.js?ver=3.7.3') }}'
    id='elementor-pro-frontend-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/lib/waypoints/waypoints.min05da.js?ver=4.0.2') }}'
    id='elementor-waypoints-js'></script>
<script type='text/javascript' src='{{ asset('template/wp-includes/js/jquery/ui/core.min0028.js?ver=1.13.1') }}'
    id='jquery-ui-core-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/lib/swiper/swiper.min48f5.js?ver=5.3.6') }}'
    id='swiper-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/lib/share-link/share-link.minf3df.js?ver=3.7.2') }}'
    id='share-link-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/lib/dialog/dialog.mind227.js?ver=4.9.0') }}'
    id='elementor-dialog-js'></script>
<script type='text/javascript' id='elementor-frontend-js-before'>
    var elementorFrontendConfig = {
        "environmentMode": {
            "edit": false,
            "wpPreview": false,
            "isScriptDebug": false
        },
        "i18n": {
            "shareOnFacebook": "Bagikan di Facebook",
            "shareOnTwitter": "Bagikan di Twitter",
            "pinIt": "Buat Pin",
            "download": "Unduh",
            "downloadImage": "Unduh gambar",
            "fullscreen": "Layar Penuh",
            "zoom": "Perbesar",
            "share": "Bagikan",
            "playVideo": "Putar Video",
            "previous": "Sebelumnya",
            "next": "Selanjutnya",
            "close": "Tutup"
        },
        "is_rtl": false,
        "breakpoints": {
            "xs": 0,
            "sm": 480,
            "md": 768,
            "lg": 1025,
            "xl": 1440,
            "xxl": 1600
        },
        "responsive": {
            "breakpoints": {
                "mobile": {
                    "label": "Ponsel",
                    "value": 767,
                    "default_value": 767,
                    "direction": "max",
                    "is_enabled": true
                },
                "mobile_extra": {
                    "label": "Ekstra Seluler",
                    "value": 880,
                    "default_value": 880,
                    "direction": "max",
                    "is_enabled": false
                },
                "tablet": {
                    "label": "Tablet",
                    "value": 1024,
                    "default_value": 1024,
                    "direction": "max",
                    "is_enabled": true
                },
                "tablet_extra": {
                    "label": "Tablet Ekstra",
                    "value": 1200,
                    "default_value": 1200,
                    "direction": "max",
                    "is_enabled": false
                },
                "laptop": {
                    "label": "Laptop",
                    "value": 1366,
                    "default_value": 1366,
                    "direction": "max",
                    "is_enabled": false
                },
                "widescreen": {
                    "label": "Layar lebar",
                    "value": 2400,
                    "default_value": 2400,
                    "direction": "min",
                    "is_enabled": false
                }
            }
        },
        "version": "3.7.2",
        "is_static": false,
        "experimentalFeatures": {
            "e_import_export": true,
            "e_hidden_wordpress_widgets": true,
            "theme_builder_v2": true,
            "landing-pages": true,
            "elements-color-picker": true,
            "favorite-widgets": true,
            "admin-top-bar": true,
            "page-transitions": true,
            "notes": true,
            "form-submissions": true,
            "e_scroll_snap": true
        },
        "urls": {
            "assets": ""
        },
        "settings": {
            "page": [],
            "editorPreferences": []
        },
        "kit": {
            "active_breakpoints": ["viewport_mobile", "viewport_tablet"],
            "global_image_lightbox": "yes",
            "lightbox_enable_counter": "yes",
            "lightbox_enable_fullscreen": "yes",
            "lightbox_enable_zoom": "yes",
            "lightbox_enable_share": "yes",
            "lightbox_title_src": "title",
            "lightbox_description_src": "description"
        },
        "post": {
            "id": 38950,
            "title": "Wulan%20%26%20Zhaffar%20-%20Mengundang%20Mu",
            "excerpt": "",
            "featuredImage": ""
        }
    };
</script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/js/frontend.minf3df.js?ver=3.7.2') }}'
    id='elementor-frontend-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor-pro/assets/js/preloaded-elements-handlers.min1ac1.js?ver=3.7.3') }}'
    id='pro-preloaded-elements-handlers-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor/assets/js/preloaded-modules.minf3df.js?ver=3.7.2') }}'
    id='preloaded-modules-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/elementor-pro/assets/lib/sticky/jquery.sticky.min1ac1.js?ver=3.7.3') }}'
    id='e-sticky-js'></script>
<script type='text/javascript' id='weddingpress-wdp-js-extra'></script>
{{-- <script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/wdp.min9b4a.js?ver=3.0.11') }}'
    id='weddingpress-wdp-js'></script> --}}
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/weddingpress/assets/js/guest-form9b4a.js?ver=3.0.11') }}'
    id='kirim-kit-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/plugins/powerpack-elements/assets/lib/tooltipster/tooltipster.min4315.js?ver=2.9.8') }}'
    id='pp-tooltipster-js'></script>
<script type='text/javascript'
    src='{{ asset('template/wp-content/themes/landingpress-wp/assets/js/script.mindeae.js?ver=3.2.1') }}'
    id='landingpress-js'></script>
<script>
    // Set the date we're counting down to
    var countDownDate = new Date('{{ $model->hitung_mundur_js }}').getTime();

    // Update the count down every 1 second
    var x = setInterval(function() {

        // Get today's date and time
        var now = new Date().getTime();
        // Find the distance between now and the count down date
        var distance = countDownDate - now;

        // Time calculations for days, hours, minutes and seconds
        var days = Math.floor(distance / (1000 * 60 * 60 * 24));
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);

        // // Display the result in the element with id="demo"
        // document.getElementById("demo").innerHTML = days + "d " + hours + "h " +
        //     minutes + "m " + seconds + "s ";

        // If the count down is finished, write some text
        if (distance < 0) {
            clearInterval(x);
            days = 00;
            hours = 00;
            minutes = 00;
            seconds = 00;
        }
        $('#cd-days').html(days);
        $('#cd-hours').html(hours);
        $('#cd-minutes').html(minutes);
        $('#cd-seconds').html(seconds);
    }, 1000);

    $(document).ready(() => {
        let is_loading = false;
        $('button.elementor-button').click(() => {
            document.getElementById('song').play();
        });

        // whishes message
        const MAX_MESSAGE = 500;
        const whishes_message = $('#whishes-message');
        whishes_message.click(check_whishes);
        whishes_message.keyup(check_whishes);
        whishes_message.change(check_whishes);

        function check_whishes() {
            const count = whishes_message.val().length;
            const diff = MAX_MESSAGE - count;
            $('#whishes-char-count').html(diff < 0 ? 0 : diff);
        }

        function refresh_pesan() {
            $.ajax({
                type: "GET",
                url: `{{ route('pesan', $model->url) }}`,
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                },
                success: (data) => {
                    check_whishes();
                    const container = $('#whishes-message-container');
                    container.html('');
                    data.forEach(e => {
                        container.append(`
                        <li class="comment even thread-even depth-1 wdp-item-comment" data-likes="0">
                            <div class="wdp-comment wdp-clearfix">
                                <div class="wdp-comment-avatar">
                                    <img src="">
                                </div>
                                <div class="wdp-comment-content">
                                    <div class="wdp-comment-info">
                                        <a class="wdp-commenter-name"
                                            title="${e.nama}">${e.nama}</a>
                                        <span class="wdp-post-author"><i class="fas fa-check-circle"></i> ${e.keterangan}</span>
                                        <br>
                                        <span class="wdp-comment-time">
                                            <i class="far fa-clock"></i> ${e.tanggal_str}
                                        </span>
                                    </div>
                                    <div class="wdp-comment-text">
                                        <p>${e.pesan} </p>
                                    </div>
                                    <div class="wdp-comment-actions">
                                    </div>
                                </div>
                            </div>
                        </li>
                        `);
                    });
                }
            });
        }

        refresh_pesan();

        // insertForm ===================================================================================
        $('#main-form').submit(function(e) {
            e.preventDefault();
            if (is_loading) return false;
            is_loading = true;
            var formData = new FormData(this);
            $.ajax({
                type: "POST",
                url: `{{ route('pesan.simpan', $model->url) }}`,
                headers: {
                    'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
                },
                data: formData,
                cache: false,
                contentType: false,
                processData: false,
                success: (data) => {
                    $('#main-form').trigger("reset");
                    check_whishes();
                    refresh_pesan();
                },
                error: function(data) {
                    console.log(data);
                },
                complete: function() {
                    console.log("finish");
                    is_loading = false;
                }
            });
        });

        setInterval(refresh_pesan, 10000);
    });
</script>
</body>

</html>
